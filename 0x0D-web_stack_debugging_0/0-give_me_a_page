#!/usr/bin/env bash
# Script to debug and fix Apache serving issue in Docker container

# Update and install Docker (if not already installed)
sudo apt-get update
sudo apt-get -y install docker.io

# Run Apache container
docker run -p 8080:80 -d -it holbertonschool/265-0

# Check Docker container status
docker ps

# Access container shell safely (fixed SC2086)
CONTAINER_ID=$(docker ps -q)
docker exec -it "$CONTAINER_ID" /bin/bash

# Fix Apache configuration (inside container)
# Check if Apache service is running
if service apache2 status | grep -q "apache2 is running"; then
    echo "Apache is running"
else
    echo "Apache is not running"
    service apache2 start
fi

# Exit container shell
exit

# Verify page content
curl 0:8080
